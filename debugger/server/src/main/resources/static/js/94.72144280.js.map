{"version":3,"file":"js/94.72144280.js","mappings":"qNAEO,MAQMA,EAAqBC,IAC9B,IAAIC,EAAK,IAAIC,UAAU,SAAUC,EAAAA,EAAAA,KAAe,iBAChDF,EAAGG,UAAYJ,CAAO,EAEbK,EAAqBL,IAC9B,IAAIC,EAAK,IAAIC,UAAU,SAAUC,EAAAA,EAAAA,KAAe,kBAChDF,EAAGG,UAAYJ,CAAO,EAGbM,EAAuBN,IAChC,IAAIC,EAAK,IAAIC,UAAU,SAAUC,EAAAA,EAAAA,KAAe,yBAChDF,EAAGG,UAAYJ,CAAO,C,wHCnBpB,SAAUO,IACZ,OAAOC,EAAAA,EAAAA,GAAc,CACjBC,IAAK,WACLC,OAAQ,OAEhB,CAGM,SAAUC,IACZ,OAAOH,EAAAA,EAAAA,GAAc,CACjBC,IAAK,aACLC,OAAQ,OAEhB,C,8DCVA,MAAME,GAAUC,EAAAA,EAAAA,IAAS,CAACC,KAAM,KAC1BC,GAAcC,EAAAA,EAAAA,IAAI,GAClBC,GAAWD,EAAAA,EAAAA,IAAI,IAGfE,EAAWA,KACfP,IACAC,EAAQE,KAAKK,OAAS,CAAC,EAGnBC,EAAYA,IACZR,EAAQE,KAAKK,OAAS,GACjB,EAEuC,GAAvCE,KAAKC,MAAMV,EAAQE,KAAKK,OAAS,IAGtCI,EAAcC,IAClBT,EAAYU,MAAQD,CAAI,E,OAI1BjB,IAAamB,MAAKC,IAChB,GAAwB,MAApBA,EAAIC,aACN,IAAK,IAAIC,KAAOF,EAAIC,aAClBC,EAAIC,KAAO,IAAIC,KAAKF,EAAIC,MACxBlB,EAAQE,KAAKkB,KAAKH,EAEtB,KAEFxB,EAAAA,EAAAA,KAAkB4B,IAChB,IAAIJ,EAAMK,KAAKC,MAAMF,EAAMnB,MAC3Be,EAAIC,KAAO,IAAIC,KAAKF,EAAIC,MACxBlB,EAAQE,KAAKkB,KAAKH,EAAI,I,21BChCxB,MAAMO,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://debuger-view/./src/utils/routerService.ts","webpack://debuger-view/./src/api/logApi.ts","webpack://debuger-view/./src/views/debug/Log.vue","webpack://debuger-view/./src/views/debug/Log.vue?51ff"],"sourcesContent":["import {GetBaseUrl} from \"@/config\";\r\n\r\nexport const createContextWs = (service: (this: WebSocket, ev: MessageEvent) => any) => {\r\n    let ws = new WebSocket('ws://' + GetBaseUrl() + '/ws/data/context')\r\n    ws.onmessage = service\r\n}\r\nexport const createFrameworkWs = (service: (this: WebSocket, ev: MessageEvent) => any) => {\r\n    let ws = new WebSocket('ws://' + GetBaseUrl() + '/ws/data/framework')\r\n    ws.onmessage = service\r\n}\r\nexport const createDiscoveryWs = (service: (this: WebSocket, ev: MessageEvent) => any) => {\r\n    let ws = new WebSocket('ws://' + GetBaseUrl() + '/ws/discovery')\r\n    ws.onmessage = service\r\n}\r\nexport const createDebugInfoWs = (service: (this: WebSocket, ev: MessageEvent) => any) => {\r\n    let ws = new WebSocket('ws://' + GetBaseUrl() + '/ws/debug/info')\r\n    ws.onmessage = service\r\n}\r\n\r\nexport const createFailServletWs = (service: (this: WebSocket, ev: MessageEvent) => any) => {\r\n    let ws = new WebSocket('ws://' + GetBaseUrl() + '/ws/debug/servletfail')\r\n    ws.onmessage = service\r\n}\r\n","import {routerRequest} from \"@/utils/request\";\r\n\r\nexport function getLogData() {\r\n    return routerRequest({\r\n        url: '/log/get',\r\n        method: 'get'\r\n    })\r\n}\r\n\r\n\r\nexport function cleanLogData() {\r\n    return routerRequest({\r\n        url: '/log/clean',\r\n        method: 'get'\r\n    })\r\n}","<script setup>\r\nimport {reactive, ref} from \"vue\";\r\nimport {createDebugInfoWs} from \"@/utils/routerService\";\r\nimport {cleanLogData, getLogData} from \"@/api/logApi\";\r\n\r\nconst logList = reactive({data: []})\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(10)\r\n\r\n// 调用清空日志API\r\nconst clearLog = () => {\r\n  cleanLogData()\r\n  logList.data.length = 0\r\n}\r\n\r\nconst getLength = () => {\r\n  if (logList.data.length < 10) {\r\n    return 1;\r\n  } else {\r\n    return Math.floor(logList.data.length / 10) * 10\r\n  }\r\n}\r\nconst changePage = (page) => {\r\n  currentPage.value = page\r\n}\r\n\r\n\r\ngetLogData().then(res => {\r\n  if (res.getContext() != null) {\r\n    for (let log of res.getContext()) {\r\n      log.date = new Date(log.date)\r\n      logList.data.push(log)\r\n    }\r\n  }\r\n})\r\ncreateDebugInfoWs(event => {\r\n  let log = JSON.parse(event.data)\r\n  log.date = new Date(log.date)\r\n  logList.data.push(log)\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div v-if=\"logList.data.length !== 0\" v-cloak>\r\n      <el-button @click=\"clearLog\" type=\"primary\" style=\"margin-bottom: 10px\">清空输出</el-button>\r\n    </div>\r\n    <div id=\"context\" v-cloak>\r\n      <el-table\r\n          :data=\"logList.data.slice((currentPage - 1) * pageSize, currentPage * pageSize)\"\r\n          height=\"600px\"\r\n      >\r\n        <el-table-column label=\"状态\" prop=\"debugType\" width=\"100px\"/>\r\n        <el-table-column label=\"时间\" prop=\"date\" width=\"200px\"/>\r\n        <el-table-column label=\"信息\" prop=\"debugMessage\"/>\r\n      </el-table>\r\n      <el-pagination class=\"flat\" background layout=\"prev, pager, next\" @current-change=\"changePage\"\r\n                     @next-click=\"changePage\" @prev-click=\"changePage\" :total=\"getLength()\"\r\n                     :hide-on-single-page=\"logList.data.length === 0\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n#context::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n[v-cloak] {\r\n  display: none;\r\n}\r\n</style>","import script from \"./Log.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Log.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Log.vue?vue&type=style&index=0&id=209f0360&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.3.1_vue@3.3.10_webpack@5.89.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-209f0360\"]])\n\nexport default __exports__"],"names":["createDiscoveryWs","service","ws","WebSocket","GetBaseUrl","onmessage","createDebugInfoWs","createFailServletWs","getLogData","routerRequest","url","method","cleanLogData","logList","reactive","data","currentPage","ref","pageSize","clearLog","length","getLength","Math","floor","changePage","page","value","then","res","getContext","log","date","Date","push","event","JSON","parse","__exports__"],"sourceRoot":""}